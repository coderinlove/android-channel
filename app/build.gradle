apply plugin: 'com.android.application'

// Create a variable called keystorePropertiesFile, and initialize it to your
// keystore.properties file, in the rootProject folder.
//def keystorePropertiesFile = rootProject.file("keystore.properties")

// Initialize a new Properties() object called keystoreProperties.
//def keystoreProperties = new Properties()

// Load your keystore.properties file into the keystoreProperties object.
//keystoreProperties.load(new FileInputStream(keystorePropertiesFile))

android {
    compileSdkVersion 25
    buildToolsVersion '25.0.3'
    useLibrary 'org.apache.http.legacy'

    loadProperties("dropbox")

    /*signingConfigs {
        config {
            keyAlias keystoreProperties['keyAlias']
            keyPassword keystoreProperties['keyPassword']
            storeFile file(keystoreProperties['storeFile'])
            storePassword keystoreProperties['storePassword']
        }
    }*/


    lintOptions {
          checkReleaseBuilds false
          // Or, if you prefer, you can continue to check for errors in release builds,
          // but continue the build even when errors are found:
          abortOnError false
      }

    defaultConfig {
        applicationId "io.rapidpro.androidchannel"
        minSdkVersion 14
        targetSdkVersion 22
        buildConfigField 'String', 'AUTH_TOKEN' , dropboxProperties.AUTH_TOKEN
        buildConfigField 'String', 'PACKS_PATH' , dropboxProperties.PATH
        buildConfigField 'String', 'FILES_URL' , dropboxProperties.FILES_URL
        buildConfigField 'String', 'DOWNLOAD_FILE_URL' , dropboxProperties.DOWNLOAD_FILE_URL
    }

    buildTypes {
        release {
//            signingConfig signingConfigs.config
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.txt'
        }
    }
}

dependencies {
    compile files('libs/json_simple-1.1.jar')
    compile 'com.android.support:support-core-utils:25.3.1'
    compile 'com.google.firebase:firebase-messaging:10.2.1'
    compile 'com.android.support:support-v4:25.3.1'
    compile 'com.squareup.okhttp3:okhttp:3.9.1'
    compile 'com.google.code.gson:gson:2.8.2'
}

apply plugin: 'com.google.gms.google-services'

def loadProperties(propertyName) {
    Properties properties = new Properties()
    properties.load(project.rootProject.file("${propertyName}.properties").newDataInputStream())
    ext."${propertyName}Properties" = properties
}